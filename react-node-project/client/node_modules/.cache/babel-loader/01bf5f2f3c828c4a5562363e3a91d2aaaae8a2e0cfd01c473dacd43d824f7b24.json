{"ast":null,"code":"import _objectSpread from\"D:/react-node-project-final/react-node-project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useAuth}from'../context/AuthContext';import Sidebar from'../components/sidebar';import axios from'axios';import io from'socket.io-client';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ChatPage=()=>{const{user}=useAuth();const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState('');const[contacts,setContacts]=useState([]);const[selectedContact,setSelectedContact]=useState(null);const[socket,setSocket]=useState(null);const[loading,setLoading]=useState(true);// إنشاء اتصال WebSocket عند تحميل المكون\nuseEffect(()=>{const newSocket=io('/chat',{auth:{token:sessionStorage.getItem('token')}});newSocket.on('connect',()=>{console.log('تم الاتصال بخادم الدردشة');});newSocket.on('message',message=>{setMessages(prevMessages=>[...prevMessages,message]);});newSocket.on('disconnect',()=>{console.log('تم قطع الاتصال بخادم الدردشة');});setSocket(newSocket);// تنظيف الاتصال عند إزالة المكون\nreturn()=>{newSocket.disconnect();};},[]);// جلب جهات الاتصال والرسائل\nuseEffect(()=>{const fetchContacts=async()=>{try{const response=await axios.get('/api/chat/contacts',{headers:{Authorization:\"Bearer \".concat(sessionStorage.getItem('token'))}});setContacts(response.data.contacts);// تحديد جهة الاتصال الافتراضية إذا كانت متوفرة\nif(response.data.contacts.length>0){setSelectedContact(response.data.contacts[0]);}setLoading(false);}catch(error){console.error('خطأ في جلب جهات الاتصال:',error);setLoading(false);}};fetchContacts();},[]);// جلب الرسائل عند تغيير جهة الاتصال المحددة\nuseEffect(()=>{if(selectedContact){const fetchMessages=async()=>{try{const response=await axios.get(\"/api/chat/messages/\".concat(selectedContact.id),{headers:{Authorization:\"Bearer \".concat(sessionStorage.getItem('token'))}});setMessages(response.data.messages);}catch(error){console.error('خطأ في جلب الرسائل:',error);}};fetchMessages();}},[selectedContact]);// إرسال رسالة جديدة\nconst sendMessage=e=>{e.preventDefault();if(!newMessage.trim()||!selectedContact||!socket)return;const messageData={content:newMessage,recipientId:selectedContact.id,senderId:user.id,timestamp:new Date().toISOString()};socket.emit('sendMessage',messageData);// إضافة الرسالة إلى القائمة المحلية\nsetMessages(prevMessages=>[...prevMessages,_objectSpread(_objectSpread({},messageData),{},{sender:{id:user.id,name:user.name}})]);setNewMessage('');};// تنسيق التاريخ\nconst formatTime=dateString=>{const date=new Date(dateString);return date.toLocaleTimeString('ar-SA',{hour:'2-digit',minute:'2-digit'});};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b bg-white shadow-sm\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold text-gray-800\",children:\"\\u0627\\u0644\\u062F\\u0631\\u062F\\u0634\\u0629\"})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex justify-center items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/4 border-l bg-white overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0628\\u062D\\u062B...\",className:\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"divide-y\",children:contacts.map(contact=>/*#__PURE__*/_jsx(\"div\",{className:\"p-4 cursor-pointer hover:bg-gray-50 \".concat((selectedContact===null||selectedContact===void 0?void 0:selectedContact.id)===contact.id?'bg-blue-50':''),onClick:()=>setSelectedContact(contact),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\",children:contact.name.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"mr-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800\",children:contact.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 truncate\",children:contact.lastMessage||'لا توجد رسائل'})]})]})},contact.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex flex-col\",children:selectedContact?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\",children:selectedContact.name.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"mr-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800\",children:selectedContact.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:selectedContact.online?'متصل الآن':'غير متصل'})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto p-4 bg-gray-50\",children:messages.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-full text-gray-500\",children:\"\\u0627\\u0628\\u062F\\u0623 \\u0645\\u062D\\u0627\\u062F\\u062B\\u0629 \\u062C\\u062F\\u064A\\u062F\\u0629\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:messages.map((message,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"flex \".concat(message.sender.id===user.id?'justify-end':'justify-start'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-xs md:max-w-md rounded-lg p-3 \".concat(message.sender.id===user.id?'bg-blue-500 text-white':'bg-white text-gray-800 border'),children:[/*#__PURE__*/_jsx(\"p\",{children:message.content}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 text-right \".concat(message.sender.id===user.id?'text-blue-100':'text-gray-500'),children:formatTime(message.timestamp)})]})},index))})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t bg-white\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendMessage,className:\"flex\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newMessage,onChange:e=>setNewMessage(e.target.value),placeholder:\"\\u0627\\u0643\\u062A\\u0628 \\u0631\\u0633\\u0627\\u0644\\u0629...\",className:\"flex-1 px-4 py-2 border rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-500 text-white px-4 py-2 rounded-l-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:\"\\u0625\\u0631\\u0633\\u0627\\u0644\"})]})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex justify-center items-center text-gray-500\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u062C\\u0647\\u0629 \\u0627\\u062A\\u0635\\u0627\\u0644 \\u0644\\u0628\\u062F\\u0621 \\u0627\\u0644\\u0645\\u062D\\u0627\\u062F\\u062B\\u0629\"})})]})]})]});};export default ChatPage;","map":{"version":3,"names":["React","useState","useEffect","useAuth","Sidebar","axios","io","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChatPage","user","messages","setMessages","newMessage","setNewMessage","contacts","setContacts","selectedContact","setSelectedContact","socket","setSocket","loading","setLoading","newSocket","auth","token","sessionStorage","getItem","on","console","log","message","prevMessages","disconnect","fetchContacts","response","get","headers","Authorization","concat","data","length","error","fetchMessages","id","sendMessage","e","preventDefault","trim","messageData","content","recipientId","senderId","timestamp","Date","toISOString","emit","_objectSpread","sender","name","formatTime","dateString","date","toLocaleTimeString","hour","minute","className","children","type","placeholder","map","contact","onClick","charAt","toUpperCase","lastMessage","online","index","onSubmit","value","onChange","target"],"sources":["D:/react-node-project-final/react-node-project/client/src/pages/Chat.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/sidebar';\nimport axios from 'axios';\nimport io from 'socket.io-client';\n\nconst ChatPage = () => {\n  const { user } = useAuth();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [contacts, setContacts] = useState([]);\n  const [selectedContact, setSelectedContact] = useState(null);\n  const [socket, setSocket] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // إنشاء اتصال WebSocket عند تحميل المكون\n  useEffect(() => {\n    const newSocket = io('/chat', {\n      auth: {\n        token: sessionStorage.getItem('token')\n      }\n    });\n\n    newSocket.on('connect', () => {\n      console.log('تم الاتصال بخادم الدردشة');\n    });\n\n    newSocket.on('message', (message) => {\n      setMessages(prevMessages => [...prevMessages, message]);\n    });\n\n    newSocket.on('disconnect', () => {\n      console.log('تم قطع الاتصال بخادم الدردشة');\n    });\n\n    setSocket(newSocket);\n\n    // تنظيف الاتصال عند إزالة المكون\n    return () => {\n      newSocket.disconnect();\n    };\n  }, []);\n\n  // جلب جهات الاتصال والرسائل\n  useEffect(() => {\n    const fetchContacts = async () => {\n      try {\n        const response = await axios.get('/api/chat/contacts', {\n          headers: { Authorization: `Bearer ${sessionStorage.getItem('token')}` }\n        });\n        setContacts(response.data.contacts);\n        \n        // تحديد جهة الاتصال الافتراضية إذا كانت متوفرة\n        if (response.data.contacts.length > 0) {\n          setSelectedContact(response.data.contacts[0]);\n        }\n        \n        setLoading(false);\n      } catch (error) {\n        console.error('خطأ في جلب جهات الاتصال:', error);\n        setLoading(false);\n      }\n    };\n\n    fetchContacts();\n  }, []);\n\n  // جلب الرسائل عند تغيير جهة الاتصال المحددة\n  useEffect(() => {\n    if (selectedContact) {\n      const fetchMessages = async () => {\n        try {\n          const response = await axios.get(`/api/chat/messages/${selectedContact.id}`, {\n            headers: { Authorization: `Bearer ${sessionStorage.getItem('token')}` }\n          });\n          setMessages(response.data.messages);\n        } catch (error) {\n          console.error('خطأ في جلب الرسائل:', error);\n        }\n      };\n\n      fetchMessages();\n    }\n  }, [selectedContact]);\n\n  // إرسال رسالة جديدة\n  const sendMessage = (e) => {\n    e.preventDefault();\n    \n    if (!newMessage.trim() || !selectedContact || !socket) return;\n    \n    const messageData = {\n      content: newMessage,\n      recipientId: selectedContact.id,\n      senderId: user.id,\n      timestamp: new Date().toISOString()\n    };\n    \n    socket.emit('sendMessage', messageData);\n    \n    // إضافة الرسالة إلى القائمة المحلية\n    setMessages(prevMessages => [...prevMessages, {\n      ...messageData,\n      sender: { id: user.id, name: user.name }\n    }]);\n    \n    setNewMessage('');\n  };\n\n  // تنسيق التاريخ\n  const formatTime = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleTimeString('ar-SA', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-100\">\n      {/* الشريط الجانبي */}\n      <Sidebar />\n      \n      {/* المحتوى الرئيسي */}\n      <div className=\"flex-1 flex flex-col\">\n        <div className=\"p-4 border-b bg-white shadow-sm\">\n          <h1 className=\"text-xl font-semibold text-gray-800\">الدردشة</h1>\n        </div>\n        \n        {loading ? (\n          <div className=\"flex-1 flex justify-center items-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n          </div>\n        ) : (\n          <div className=\"flex-1 flex overflow-hidden\">\n            {/* قائمة جهات الاتصال */}\n            <div className=\"w-1/4 border-l bg-white overflow-y-auto\">\n              <div className=\"p-4 border-b\">\n                <input\n                  type=\"text\"\n                  placeholder=\"بحث...\"\n                  className=\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n              <div className=\"divide-y\">\n                {contacts.map((contact) => (\n                  <div\n                    key={contact.id}\n                    className={`p-4 cursor-pointer hover:bg-gray-50 ${selectedContact?.id === contact.id ? 'bg-blue-50' : ''}`}\n                    onClick={() => setSelectedContact(contact)}\n                  >\n                    <div className=\"flex items-center\">\n                      <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\">\n                        {contact.name.charAt(0).toUpperCase()}\n                      </div>\n                      <div className=\"mr-3\">\n                        <p className=\"font-medium text-gray-800\">{contact.name}</p>\n                        <p className=\"text-sm text-gray-500 truncate\">{contact.lastMessage || 'لا توجد رسائل'}</p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n            \n            {/* منطقة الدردشة */}\n            <div className=\"flex-1 flex flex-col\">\n              {selectedContact ? (\n                <>\n                  {/* رأس الدردشة */}\n                  <div className=\"p-4 border-b bg-white\">\n                    <div className=\"flex items-center\">\n                      <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\">\n                        {selectedContact.name.charAt(0).toUpperCase()}\n                      </div>\n                      <div className=\"mr-3\">\n                        <p className=\"font-medium text-gray-800\">{selectedContact.name}</p>\n                        <p className=\"text-sm text-gray-500\">\n                          {selectedContact.online ? 'متصل الآن' : 'غير متصل'}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* محتوى الدردشة */}\n                  <div className=\"flex-1 overflow-y-auto p-4 bg-gray-50\">\n                    {messages.length === 0 ? (\n                      <div className=\"flex justify-center items-center h-full text-gray-500\">\n                        ابدأ محادثة جديدة\n                      </div>\n                    ) : (\n                      <div className=\"space-y-4\">\n                        {messages.map((message, index) => (\n                          <div\n                            key={index}\n                            className={`flex ${message.sender.id === user.id ? 'justify-end' : 'justify-start'}`}\n                          >\n                            <div\n                              className={`max-w-xs md:max-w-md rounded-lg p-3 ${\n                                message.sender.id === user.id\n                                  ? 'bg-blue-500 text-white'\n                                  : 'bg-white text-gray-800 border'\n                              }`}\n                            >\n                              <p>{message.content}</p>\n                              <p className={`text-xs mt-1 text-right ${\n                                message.sender.id === user.id ? 'text-blue-100' : 'text-gray-500'\n                              }`}>\n                                {formatTime(message.timestamp)}\n                              </p>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* نموذج إرسال الرسائل */}\n                  <div className=\"p-4 border-t bg-white\">\n                    <form onSubmit={sendMessage} className=\"flex\">\n                      <input\n                        type=\"text\"\n                        value={newMessage}\n                        onChange={(e) => setNewMessage(e.target.value)}\n                        placeholder=\"اكتب رسالة...\"\n                        className=\"flex-1 px-4 py-2 border rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      />\n                      <button\n                        type=\"submit\"\n                        className=\"bg-blue-500 text-white px-4 py-2 rounded-l-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      >\n                        إرسال\n                      </button>\n                    </form>\n                  </div>\n                </>\n              ) : (\n                <div className=\"flex-1 flex justify-center items-center text-gray-500\">\n                  اختر جهة اتصال لبدء المحادثة\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ChatPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}