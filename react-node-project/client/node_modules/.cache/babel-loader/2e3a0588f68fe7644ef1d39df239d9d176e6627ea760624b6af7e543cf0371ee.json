{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../context/AuthContext';import Sidebar from'../components/sidebar';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StudentProjectsPage=()=>{const[projects,setProjects]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchProjects=async()=>{try{setLoading(true);const response=await axios.get('/api/student/projects',{headers:{Authorization:\"Bearer \".concat(sessionStorage.getItem('token'))}});setProjects(response.data.projects);}catch(error){console.error('خطأ في جلب المشاريع:',error);}finally{setLoading(false);}};fetchProjects();},[]);// تنسيق التاريخ\nconst formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleDateString('ar-SA',{year:'numeric',month:'short',day:'numeric'});};// حساب نسبة الإكمال\nconst calculateProgress=project=>{if(!project.tasks||project.tasks.length===0)return 0;const completedTasks=project.tasks.filter(task=>task.status==='completed').length;return Math.round(completedTasks/project.tasks.length*100);};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center mb-6\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold text-gray-800\",children:\"\\u0645\\u0634\\u0627\\u0631\\u064A\\u0639\\u064A\"})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"})}):projects.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6 text-center text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0645\\u0634\\u0627\\u0631\\u064A\\u0639 \\u0645\\u062A\\u0627\\u062D\\u0629\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:projects.map(project=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800 mb-2\",children:project.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:project.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm text-gray-500 mb-4\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0628\\u062F\\u0621: \",formatDate(project.startDate)]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0627\\u0646\\u062A\\u0647\\u0627\\u0621: \",formatDate(project.endDate)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0627\\u0644\\u062A\\u0642\\u062F\\u0645\"}),/*#__PURE__*/_jsxs(\"span\",{children:[calculateProgress(project),\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2.5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 h-2.5 rounded-full\",style:{width:\"\".concat(calculateProgress(project),\"%\")}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex -space-x-2 rtl:space-x-reverse\",children:[project.team&&project.team.slice(0,3).map((member,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-blue-500 border-2 border-white flex items-center justify-center text-white text-xs font-semibold\",title:member.name,children:member.name.charAt(0).toUpperCase()},index)),project.team&&project.team.length>3&&/*#__PURE__*/_jsxs(\"div\",{className:\"w-8 h-8 rounded-full bg-gray-300 border-2 border-white flex items-center justify-center text-gray-600 text-xs font-semibold\",children:[\"+\",project.team.length-3]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs rounded-full \".concat(project.status==='completed'?'bg-green-100 text-green-800':project.status==='in_progress'?'bg-blue-100 text-blue-800':'bg-yellow-100 text-yellow-800'),children:project.status==='completed'?'مكتمل':project.status==='in_progress'?'قيد التنفيذ':'معلق'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t px-6 py-3 bg-gray-50 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",children:\"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644\"})})]},project.id))})]})})]});};export default StudentProjectsPage;","map":{"version":3,"names":["React","useState","useEffect","useAuth","Sidebar","axios","jsx","_jsx","jsxs","_jsxs","StudentProjectsPage","projects","setProjects","loading","setLoading","fetchProjects","response","get","headers","Authorization","concat","sessionStorage","getItem","data","error","console","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","calculateProgress","project","tasks","length","completedTasks","filter","task","status","Math","round","className","children","map","name","description","startDate","endDate","style","width","team","slice","member","index","title","charAt","toUpperCase","id"],"sources":["D:/react-node-project-final/react-node-project/client/src/pages/StudentProjects.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/sidebar';\nimport axios from 'axios';\n\nconst StudentProjectsPage = () => {\n  const [projects, setProjects] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchProjects = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get('/api/student/projects', {\n          headers: { Authorization: `Bearer ${sessionStorage.getItem('token')}` }\n        });\n        setProjects(response.data.projects);\n      } catch (error) {\n        console.error('خطأ في جلب المشاريع:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProjects();\n  }, []);\n\n  // تنسيق التاريخ\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('ar-SA', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  // حساب نسبة الإكمال\n  const calculateProgress = (project) => {\n    if (!project.tasks || project.tasks.length === 0) return 0;\n    \n    const completedTasks = project.tasks.filter(task => task.status === 'completed').length;\n    return Math.round((completedTasks / project.tasks.length) * 100);\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-100\">\n      {/* الشريط الجانبي */}\n      <Sidebar />\n      \n      {/* المحتوى الرئيسي */}\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h1 className=\"text-2xl font-semibold text-gray-800\">مشاريعي</h1>\n          </div>\n          \n          {loading ? (\n            <div className=\"flex justify-center items-center h-64\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n            </div>\n          ) : projects.length === 0 ? (\n            <div className=\"bg-white rounded-lg shadow-sm p-6 text-center text-gray-500\">\n              لا توجد مشاريع متاحة\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {projects.map((project) => (\n                <div key={project.id} className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n                  <div className=\"p-6\">\n                    <h2 className=\"text-xl font-semibold text-gray-800 mb-2\">{project.name}</h2>\n                    <p className=\"text-gray-600 mb-4\">{project.description}</p>\n                    \n                    <div className=\"flex justify-between text-sm text-gray-500 mb-4\">\n                      <span>تاريخ البدء: {formatDate(project.startDate)}</span>\n                      <span>تاريخ الانتهاء: {formatDate(project.endDate)}</span>\n                    </div>\n                    \n                    <div className=\"mb-2\">\n                      <div className=\"flex justify-between text-sm mb-1\">\n                        <span>التقدم</span>\n                        <span>{calculateProgress(project)}%</span>\n                      </div>\n                      <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\n                        <div\n                          className=\"bg-blue-600 h-2.5 rounded-full\"\n                          style={{ width: `${calculateProgress(project)}%` }}\n                        ></div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex justify-between items-center mt-4\">\n                      <div className=\"flex -space-x-2 rtl:space-x-reverse\">\n                        {project.team && project.team.slice(0, 3).map((member, index) => (\n                          <div\n                            key={index}\n                            className=\"w-8 h-8 rounded-full bg-blue-500 border-2 border-white flex items-center justify-center text-white text-xs font-semibold\"\n                            title={member.name}\n                          >\n                            {member.name.charAt(0).toUpperCase()}\n                          </div>\n                        ))}\n                        {project.team && project.team.length > 3 && (\n                          <div className=\"w-8 h-8 rounded-full bg-gray-300 border-2 border-white flex items-center justify-center text-gray-600 text-xs font-semibold\">\n                            +{project.team.length - 3}\n                          </div>\n                        )}\n                      </div>\n                      \n                      <span className={`px-2 py-1 text-xs rounded-full ${\n                        project.status === 'completed' ? 'bg-green-100 text-green-800' : \n                        project.status === 'in_progress' ? 'bg-blue-100 text-blue-800' : \n                        'bg-yellow-100 text-yellow-800'\n                      }`}>\n                        {project.status === 'completed' ? 'مكتمل' : \n                         project.status === 'in_progress' ? 'قيد التنفيذ' : \n                         'معلق'}\n                      </span>\n                    </div>\n                  </div>\n                  \n                  <div className=\"border-t px-6 py-3 bg-gray-50 flex justify-end\">\n                    <button className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\">\n                      عرض التفاصيل\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default StudentProjectsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}