{"ast":null,"code":"var _jsxFileName = \"D:\\\\react-node-project-final\\\\react-node-project\\\\client\\\\src\\\\pages\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport DashboardLayout from '../components/dashboard-layout';\nimport { MessageSquare, Users, UserCog } from 'lucide-react';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Chat = () => {\n  _s();\n  const {\n    user: currentUser\n  } = useAuth();\n  const [users, setUsers] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [adminUsers, setAdminUsers] = useState([]);\n  const [studentUsers, setStudentUsers] = useState([]);\n  const [selectedAdmin, setSelectedAdmin] = useState(null);\n  const [selectedStudent, setSelectedStudent] = useState(null);\n  const [newMessage, setNewMessage] = useState('');\n  const [activeTab, setActiveTab] = useState('admins');\n  useEffect(() => {\n    fetchUsers();\n    fetchMessages();\n  }, []);\n  useEffect(() => {\n    if (users.length > 0) {\n      // Filter admin users\n      const admins = users.filter(u => u.role === 'admin');\n      setAdminUsers(admins);\n\n      // Filter student users (excluding current user)\n      const students = users.filter(u => u.role === 'student' && u.id !== (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id));\n      setStudentUsers(students);\n\n      // Set first admin as selected by default if available\n      if (admins.length > 0 && !selectedAdmin) {\n        setSelectedAdmin(admins[0].id);\n      }\n\n      // Set first student as selected by default if available\n      if (students.length > 0 && !selectedStudent) {\n        setSelectedStudent(students[0].id);\n      }\n    }\n  }, [users, currentUser]);\n  const fetchUsers = async () => {\n    try {\n      const response = await api.get('/users');\n      setUsers(response.data);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n    }\n  };\n  const fetchMessages = async () => {\n    try {\n      const response = await api.get('/messages');\n      setMessages(response.data);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n  const handleSendMessage = async () => {\n    if (!newMessage || !currentUser) return;\n    const receiverId = activeTab === 'admins' ? selectedAdmin : selectedStudent;\n    if (!receiverId) return;\n    try {\n      const response = await api.post('/messages', {\n        senderId: currentUser.id,\n        receiverId,\n        content: newMessage\n      });\n      setMessages([...messages, response.data]);\n      setNewMessage('');\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n  const getUserName = id => {\n    const user = users.find(user => user.id === id);\n    return user ? user.name : 'Unknown User';\n  };\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();\n  };\n  const getConversation = userId => {\n    if (!currentUser) return [];\n    return messages.filter(msg => msg.senderId === currentUser.id && msg.receiverId === userId || msg.senderId === userId && msg.receiverId === currentUser.id).sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());\n  };\n  return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n    title: \"Chat\",\n    userRole: currentUser === null || currentUser === void 0 ? void 0 : currentUser.role,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `flex items-center justify-center gap-2 p-4 rounded-t-lg ${activeTab === 'admins' ? 'bg-gray-800 text-white' : 'bg-gray-700 text-gray-300'}`,\n          onClick: () => setActiveTab('admins'),\n          children: [/*#__PURE__*/_jsxDEV(UserCog, {\n            className: \"h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Chat with Administrators\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `flex items-center justify-center gap-2 p-4 rounded-t-lg ${activeTab === 'students' ? 'bg-gray-800 text-white' : 'bg-gray-700 text-gray-300'}`,\n          onClick: () => setActiveTab('students'),\n          children: [/*#__PURE__*/_jsxDEV(Users, {\n            className: \"h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Chat with Students\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), activeTab === 'admins' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-6 h-[calc(100vh-280px)]\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-800 border border-gray-700 rounded-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-bold mb-4 text-white\",\n              children: \"Administrators\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-[calc(100vh-360px)] overflow-y-auto pr-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: adminUsers.map(admin => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `p-3 rounded-md cursor-pointer flex items-center space-x-3 ${selectedAdmin === admin.id ? 'bg-gray-700' : 'hover:bg-gray-700/50'}`,\n                  onClick: () => setSelectedAdmin(admin.id),\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold\",\n                    children: admin.name.charAt(0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 144,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-medium text-white\",\n                      children: admin.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 148,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-400\",\n                      children: \"Administrator\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 149,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 25\n                  }, this)]\n                }, admin.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-800 border border-gray-700 rounded-lg md:col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 flex flex-col h-[calc(100vh-320px)]\",\n            children: selectedAdmin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-b border-gray-700 pb-4 mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-xl font-bold text-white\",\n                  children: [\"Chatting with \", getUserName(selectedAdmin)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-grow overflow-y-auto mb-4 pr-4\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-4\",\n                  children: getConversation(selectedAdmin).map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `flex ${msg.senderId === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) ? 'justify-end' : 'justify-start'}`,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: `max-w-[70%] p-3 rounded-lg ${msg.senderId === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) ? 'bg-blue-600 text-white' : 'bg-gray-700 text-white'}`,\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        children: msg.content\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 181,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-xs opacity-70 mt-1\",\n                        children: formatDate(msg.timestamp)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 182,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 29\n                    }, this)\n                  }, msg.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Type your message...\",\n                  value: newMessage,\n                  onChange: e => setNewMessage(e.target.value),\n                  className: \"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                  onKeyDown: e => {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                      e.preventDefault();\n                      handleSendMessage();\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleSendMessage,\n                  className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n                    className: \"h-4 w-4 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 25\n                  }, this), \"Send\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center h-full text-gray-400\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Select an administrator from the list to start chatting\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this), activeTab === 'students' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-6 h-[calc(100vh-280px)]\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-800 border border-gray-700 rounded-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-bold mb-4 text-white\",\n              children: \"Students\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-[calc(100vh-360px)] overflow-y-auto pr-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: studentUsers.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-400 text-center p-4\",\n                  children: \"No other students available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 23\n                }, this) : studentUsers.map(student => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `p-3 rounded-md cursor-pointer flex items-center space-x-3 ${selectedStudent === student.id ? 'bg-gray-700' : 'hover:bg-gray-700/50'}`,\n                  onClick: () => setSelectedStudent(student.id),\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold\",\n                    children: student.name.charAt(0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-medium text-white\",\n                      children: student.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 243,\n                      columnNumber: 29\n                    }, this), student.studentId && /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-400\",\n                      children: [\"ID: \", student.studentId]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 27\n                  }, this)]\n                }, student.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-800 border border-gray-700 rounded-lg md:col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 flex flex-col h-[calc(100vh-320px)]\",\n            children: selectedStudent ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-b border-gray-700 pb-4 mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-xl font-bold text-white\",\n                  children: [\"Chatting with \", getUserName(selectedStudent)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-grow overflow-y-auto mb-4 pr-4\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-4\",\n                  children: getConversation(selectedStudent).map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `flex ${msg.senderId === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) ? 'justify-end' : 'justify-start'}`,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: `max-w-[70%] p-3 rounded-lg ${msg.senderId === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) ? 'bg-blue-600 text-white' : 'bg-gray-700 text-white'}`,\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        children: msg.content\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 279,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-xs opacity-70 mt-1\",\n                        children: formatDate(msg.timestamp)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 280,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 272,\n                      columnNumber: 29\n                    }, this)\n                  }, msg.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 268,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Type your message...\",\n                  value: newMessage,\n                  onChange: e => setNewMessage(e.target.value),\n                  className: \"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                  onKeyDown: e => {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                      e.preventDefault();\n                      handleSendMessage();\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleSendMessage,\n                  className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n                    className: \"h-4 w-4 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 304,\n                    columnNumber: 25\n                  }, this), \"Send\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center h-full text-gray-400\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: studentUsers.length === 0 ? 'No other students available to chat with' : 'Select a student from the list to start chatting'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n};\n_s(Chat, \"+kc70GNzIrSSxvl8lu7c2VEKBSM=\", false, function () {\n  return [useAuth];\n});\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","DashboardLayout","MessageSquare","Users","UserCog","api","jsxDEV","_jsxDEV","Fragment","_Fragment","Chat","_s","user","currentUser","users","setUsers","messages","setMessages","adminUsers","setAdminUsers","studentUsers","setStudentUsers","selectedAdmin","setSelectedAdmin","selectedStudent","setSelectedStudent","newMessage","setNewMessage","activeTab","setActiveTab","fetchUsers","fetchMessages","length","admins","filter","u","role","students","id","response","get","data","error","console","handleSendMessage","receiverId","post","senderId","content","getUserName","find","name","formatDate","dateString","date","Date","toLocaleDateString","toLocaleTimeString","getConversation","userId","msg","sort","a","b","timestamp","getTime","title","userRole","children","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","map","admin","charAt","type","placeholder","value","onChange","e","target","onKeyDown","key","shiftKey","preventDefault","student","studentId","_c","$RefreshReg$"],"sources":["D:/react-node-project-final/react-node-project/client/src/pages/Chat.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport DashboardLayout from '../components/dashboard-layout';\nimport { MessageSquare, Users, UserCog } from 'lucide-react';\nimport api from '../services/api';\n\nconst Chat = () => {\n  const { user: currentUser } = useAuth();\n  const [users, setUsers] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [adminUsers, setAdminUsers] = useState([]);\n  const [studentUsers, setStudentUsers] = useState([]);\n  const [selectedAdmin, setSelectedAdmin] = useState(null);\n  const [selectedStudent, setSelectedStudent] = useState(null);\n  const [newMessage, setNewMessage] = useState('');\n  const [activeTab, setActiveTab] = useState('admins');\n\n  useEffect(() => {\n    fetchUsers();\n    fetchMessages();\n  }, []);\n\n  useEffect(() => {\n    if (users.length > 0) {\n      // Filter admin users\n      const admins = users.filter(u => u.role === 'admin');\n      setAdminUsers(admins);\n\n      // Filter student users (excluding current user)\n      const students = users.filter(u => u.role === 'student' && u.id !== currentUser?.id);\n      setStudentUsers(students);\n\n      // Set first admin as selected by default if available\n      if (admins.length > 0 && !selectedAdmin) {\n        setSelectedAdmin(admins[0].id);\n      }\n\n      // Set first student as selected by default if available\n      if (students.length > 0 && !selectedStudent) {\n        setSelectedStudent(students[0].id);\n      }\n    }\n  }, [users, currentUser]);\n\n  const fetchUsers = async () => {\n    try {\n      const response = await api.get('/users');\n      setUsers(response.data);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n    }\n  };\n\n  const fetchMessages = async () => {\n    try {\n      const response = await api.get('/messages');\n      setMessages(response.data);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n\n  const handleSendMessage = async () => {\n    if (!newMessage || !currentUser) return;\n\n    const receiverId = activeTab === 'admins' ? selectedAdmin : selectedStudent;\n    if (!receiverId) return;\n\n    try {\n      const response = await api.post('/messages', {\n        senderId: currentUser.id,\n        receiverId,\n        content: newMessage,\n      });\n\n      setMessages([...messages, response.data]);\n      setNewMessage('');\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n\n  const getUserName = (id) => {\n    const user = users.find(user => user.id === id);\n    return user ? user.name : 'Unknown User';\n  };\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();\n  };\n\n  const getConversation = (userId) => {\n    if (!currentUser) return [];\n\n    return messages\n      .filter(\n        msg =>\n          (msg.senderId === currentUser.id && msg.receiverId === userId) ||\n          (msg.senderId === userId && msg.receiverId === currentUser.id),\n      )\n      .sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());\n  };\n\n  return (\n    <DashboardLayout title=\"Chat\" userRole={currentUser?.role}>\n      <div className=\"w-full\">\n        <div className=\"grid grid-cols-2 mb-6\">\n          <button\n            className={`flex items-center justify-center gap-2 p-4 rounded-t-lg ${\n              activeTab === 'admins' ? 'bg-gray-800 text-white' : 'bg-gray-700 text-gray-300'\n            }`}\n            onClick={() => setActiveTab('admins')}\n          >\n            <UserCog className=\"h-4 w-4\" />\n            <span>Chat with Administrators</span>\n          </button>\n          <button\n            className={`flex items-center justify-center gap-2 p-4 rounded-t-lg ${\n              activeTab === 'students' ? 'bg-gray-800 text-white' : 'bg-gray-700 text-gray-300'\n            }`}\n            onClick={() => setActiveTab('students')}\n          >\n            <Users className=\"h-4 w-4\" />\n            <span>Chat with Students</span>\n          </button>\n        </div>\n\n        {activeTab === 'admins' && (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 h-[calc(100vh-280px)]\">\n            <div className=\"bg-gray-800 border border-gray-700 rounded-lg\">\n              <div className=\"p-4\">\n                <h2 className=\"text-xl font-bold mb-4 text-white\">Administrators</h2>\n                <div className=\"h-[calc(100vh-360px)] overflow-y-auto pr-4\">\n                  <div className=\"space-y-2\">\n                    {adminUsers.map((admin) => (\n                      <div\n                        key={admin.id}\n                        className={`p-3 rounded-md cursor-pointer flex items-center space-x-3 ${\n                          selectedAdmin === admin.id ? 'bg-gray-700' : 'hover:bg-gray-700/50'\n                        }`}\n                        onClick={() => setSelectedAdmin(admin.id)}\n                      >\n                        <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold\">\n                          {admin.name.charAt(0)}\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-white\">{admin.name}</p>\n                          <p className=\"text-sm text-gray-400\">Administrator</p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gray-800 border border-gray-700 rounded-lg md:col-span-2\">\n              <div className=\"p-4 flex flex-col h-[calc(100vh-320px)]\">\n                {selectedAdmin ? (\n                  <>\n                    <div className=\"border-b border-gray-700 pb-4 mb-4\">\n                      <h2 className=\"text-xl font-bold text-white\">\n                        Chatting with {getUserName(selectedAdmin)}\n                      </h2>\n                    </div>\n                    <div className=\"flex-grow overflow-y-auto mb-4 pr-4\">\n                      <div className=\"space-y-4\">\n                        {getConversation(selectedAdmin).map((msg) => (\n                          <div\n                            key={msg.id}\n                            className={`flex ${msg.senderId === currentUser?.id ? 'justify-end' : 'justify-start'}`}\n                          >\n                            <div\n                              className={`max-w-[70%] p-3 rounded-lg ${\n                                msg.senderId === currentUser?.id\n                                  ? 'bg-blue-600 text-white'\n                                  : 'bg-gray-700 text-white'\n                              }`}\n                            >\n                              <p>{msg.content}</p>\n                              <p className=\"text-xs opacity-70 mt-1\">{formatDate(msg.timestamp)}</p>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      <input\n                        type=\"text\"\n                        placeholder=\"Type your message...\"\n                        value={newMessage}\n                        onChange={(e) => setNewMessage(e.target.value)}\n                        className=\"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        onKeyDown={(e) => {\n                          if (e.key === 'Enter' && !e.shiftKey) {\n                            e.preventDefault();\n                            handleSendMessage();\n                          }\n                        }}\n                      />\n                      <button\n                        onClick={handleSendMessage}\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center\"\n                      >\n                        <MessageSquare className=\"h-4 w-4 mr-2\" />\n                        Send\n                      </button>\n                    </div>\n                  </>\n                ) : (\n                  <div className=\"flex items-center justify-center h-full text-gray-400\">\n                    <p>Select an administrator from the list to start chatting</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'students' && (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 h-[calc(100vh-280px)]\">\n            <div className=\"bg-gray-800 border border-gray-700 rounded-lg\">\n              <div className=\"p-4\">\n                <h2 className=\"text-xl font-bold mb-4 text-white\">Students</h2>\n                <div className=\"h-[calc(100vh-360px)] overflow-y-auto pr-4\">\n                  <div className=\"space-y-2\">\n                    {studentUsers.length === 0 ? (\n                      <p className=\"text-gray-400 text-center p-4\">No other students available</p>\n                    ) : (\n                      studentUsers.map((student) => (\n                        <div\n                          key={student.id}\n                          className={`p-3 rounded-md cursor-pointer flex items-center space-x-3 ${\n                            selectedStudent === student.id ? 'bg-gray-700' : 'hover:bg-gray-700/50'\n                          }`}\n                          onClick={() => setSelectedStudent(student.id)}\n                        >\n                          <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold\">\n                            {student.name.charAt(0)}\n                          </div>\n                          <div>\n                            <p className=\"font-medium text-white\">{student.name}</p>\n                            {student.studentId && (\n                              <p className=\"text-sm text-gray-400\">ID: {student.studentId}</p>\n                            )}\n                          </div>\n                        </div>\n                      ))\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gray-800 border border-gray-700 rounded-lg md:col-span-2\">\n              <div className=\"p-4 flex flex-col h-[calc(100vh-320px)]\">\n                {selectedStudent ? (\n                  <>\n                    <div className=\"border-b border-gray-700 pb-4 mb-4\">\n                      <h2 className=\"text-xl font-bold text-white\">\n                        Chatting with {getUserName(selectedStudent)}\n                      </h2>\n                    </div>\n                    <div className=\"flex-grow overflow-y-auto mb-4 pr-4\">\n                      <div className=\"space-y-4\">\n                        {getConversation(selectedStudent).map((msg) => (\n                          <div\n                            key={msg.id}\n                            className={`flex ${msg.senderId === currentUser?.id ? 'justify-end' : 'justify-start'}`}\n                          >\n                            <div\n                              className={`max-w-[70%] p-3 rounded-lg ${\n                                msg.senderId === currentUser?.id\n                                  ? 'bg-blue-600 text-white'\n                                  : 'bg-gray-700 text-white'\n                              }`}\n                            >\n                              <p>{msg.content}</p>\n                              <p className=\"text-xs opacity-70 mt-1\">{formatDate(msg.timestamp)}</p>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      <input\n                        type=\"text\"\n                        placeholder=\"Type your message...\"\n                        value={newMessage}\n                        onChange={(e) => setNewMessage(e.target.value)}\n                        className=\"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        onKeyDown={(e) => {\n                          if (e.key === 'Enter' && !e.shiftKey) {\n                            e.preventDefault();\n                            handleSendMessage();\n                          }\n                        }}\n                      />\n                      <button\n                        onClick={handleSendMessage}\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center\"\n                      >\n                        <MessageSquare className=\"h-4 w-4 mr-2\" />\n                        Send\n                      </button>\n                    </div>\n                  </>\n                ) : (\n                  <div className=\"flex items-center justify-center h-full text-gray-400\">\n                    <p>\n                      {studentUsers.length === 0\n                        ? 'No other students available to chat with'\n                        : 'Select a student from the list to start chatting'}\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  );\n};\n\nexport default Chat;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,OAAO,QAAQ,wBAAwB;AAChD,OAAOC,eAAe,MAAM,gCAAgC;AAC5D,SAASC,aAAa,EAAEC,KAAK,EAAEC,OAAO,QAAQ,cAAc;AAC5D,OAAOC,GAAG,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAElC,MAAMC,IAAI,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjB,MAAM;IAAEC,IAAI,EAAEC;EAAY,CAAC,GAAGb,OAAO,CAAC,CAAC;EACvC,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACkB,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACoB,UAAU,EAAEC,aAAa,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACsB,YAAY,EAAEC,eAAe,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACwB,aAAa,EAAEC,gBAAgB,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAAC0B,eAAe,EAAEC,kBAAkB,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAAC4B,UAAU,EAAEC,aAAa,CAAC,GAAG7B,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAAC8B,SAAS,EAAEC,YAAY,CAAC,GAAG/B,QAAQ,CAAC,QAAQ,CAAC;EAEpDC,SAAS,CAAC,MAAM;IACd+B,UAAU,CAAC,CAAC;IACZC,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,EAAE,CAAC;EAENhC,SAAS,CAAC,MAAM;IACd,IAAIe,KAAK,CAACkB,MAAM,GAAG,CAAC,EAAE;MACpB;MACA,MAAMC,MAAM,GAAGnB,KAAK,CAACoB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,OAAO,CAAC;MACpDjB,aAAa,CAACc,MAAM,CAAC;;MAErB;MACA,MAAMI,QAAQ,GAAGvB,KAAK,CAACoB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,SAAS,IAAID,CAAC,CAACG,EAAE,MAAKzB,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEyB,EAAE,EAAC;MACpFjB,eAAe,CAACgB,QAAQ,CAAC;;MAEzB;MACA,IAAIJ,MAAM,CAACD,MAAM,GAAG,CAAC,IAAI,CAACV,aAAa,EAAE;QACvCC,gBAAgB,CAACU,MAAM,CAAC,CAAC,CAAC,CAACK,EAAE,CAAC;MAChC;;MAEA;MACA,IAAID,QAAQ,CAACL,MAAM,GAAG,CAAC,IAAI,CAACR,eAAe,EAAE;QAC3CC,kBAAkB,CAACY,QAAQ,CAAC,CAAC,CAAC,CAACC,EAAE,CAAC;MACpC;IACF;EACF,CAAC,EAAE,CAACxB,KAAK,EAAED,WAAW,CAAC,CAAC;EAExB,MAAMiB,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACF,MAAMS,QAAQ,GAAG,MAAMlC,GAAG,CAACmC,GAAG,CAAC,QAAQ,CAAC;MACxCzB,QAAQ,CAACwB,QAAQ,CAACE,IAAI,CAAC;IACzB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC/C;EACF,CAAC;EAED,MAAMX,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACF,MAAMQ,QAAQ,GAAG,MAAMlC,GAAG,CAACmC,GAAG,CAAC,WAAW,CAAC;MAC3CvB,WAAW,CAACsB,QAAQ,CAACE,IAAI,CAAC;IAC5B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;IAClD;EACF,CAAC;EAED,MAAME,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI,CAAClB,UAAU,IAAI,CAACb,WAAW,EAAE;IAEjC,MAAMgC,UAAU,GAAGjB,SAAS,KAAK,QAAQ,GAAGN,aAAa,GAAGE,eAAe;IAC3E,IAAI,CAACqB,UAAU,EAAE;IAEjB,IAAI;MACF,MAAMN,QAAQ,GAAG,MAAMlC,GAAG,CAACyC,IAAI,CAAC,WAAW,EAAE;QAC3CC,QAAQ,EAAElC,WAAW,CAACyB,EAAE;QACxBO,UAAU;QACVG,OAAO,EAAEtB;MACX,CAAC,CAAC;MAEFT,WAAW,CAAC,CAAC,GAAGD,QAAQ,EAAEuB,QAAQ,CAACE,IAAI,CAAC,CAAC;MACzCd,aAAa,CAAC,EAAE,CAAC;IACnB,CAAC,CAAC,OAAOe,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAChD;EACF,CAAC;EAED,MAAMO,WAAW,GAAIX,EAAE,IAAK;IAC1B,MAAM1B,IAAI,GAAGE,KAAK,CAACoC,IAAI,CAACtC,IAAI,IAAIA,IAAI,CAAC0B,EAAE,KAAKA,EAAE,CAAC;IAC/C,OAAO1B,IAAI,GAAGA,IAAI,CAACuC,IAAI,GAAG,cAAc;EAC1C,CAAC;EAED,MAAMC,UAAU,GAAIC,UAAU,IAAK;IACjC,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,UAAU,CAAC;IACjC,OAAOC,IAAI,CAACE,kBAAkB,CAAC,CAAC,GAAG,GAAG,GAAGF,IAAI,CAACG,kBAAkB,CAAC,CAAC;EACpE,CAAC;EAED,MAAMC,eAAe,GAAIC,MAAM,IAAK;IAClC,IAAI,CAAC9C,WAAW,EAAE,OAAO,EAAE;IAE3B,OAAOG,QAAQ,CACZkB,MAAM,CACL0B,GAAG,IACAA,GAAG,CAACb,QAAQ,KAAKlC,WAAW,CAACyB,EAAE,IAAIsB,GAAG,CAACf,UAAU,KAAKc,MAAM,IAC5DC,GAAG,CAACb,QAAQ,KAAKY,MAAM,IAAIC,GAAG,CAACf,UAAU,KAAKhC,WAAW,CAACyB,EAC/D,CAAC,CACAuB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIR,IAAI,CAACO,CAAC,CAACE,SAAS,CAAC,CAACC,OAAO,CAAC,CAAC,GAAG,IAAIV,IAAI,CAACQ,CAAC,CAACC,SAAS,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC;EACtF,CAAC;EAED,oBACE1D,OAAA,CAACN,eAAe;IAACiE,KAAK,EAAC,MAAM;IAACC,QAAQ,EAAEtD,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEuB,IAAK;IAAAgC,QAAA,eACxD7D,OAAA;MAAK8D,SAAS,EAAC,QAAQ;MAAAD,QAAA,gBACrB7D,OAAA;QAAK8D,SAAS,EAAC,uBAAuB;QAAAD,QAAA,gBACpC7D,OAAA;UACE8D,SAAS,EAAE,2DACTzC,SAAS,KAAK,QAAQ,GAAG,wBAAwB,GAAG,2BAA2B,EAC9E;UACH0C,OAAO,EAAEA,CAAA,KAAMzC,YAAY,CAAC,QAAQ,CAAE;UAAAuC,QAAA,gBAEtC7D,OAAA,CAACH,OAAO;YAACiE,SAAS,EAAC;UAAS;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC/BnE,OAAA;YAAA6D,QAAA,EAAM;UAAwB;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/B,CAAC,eACTnE,OAAA;UACE8D,SAAS,EAAE,2DACTzC,SAAS,KAAK,UAAU,GAAG,wBAAwB,GAAG,2BAA2B,EAChF;UACH0C,OAAO,EAAEA,CAAA,KAAMzC,YAAY,CAAC,UAAU,CAAE;UAAAuC,QAAA,gBAExC7D,OAAA,CAACJ,KAAK;YAACkE,SAAS,EAAC;UAAS;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC7BnE,OAAA;YAAA6D,QAAA,EAAM;UAAkB;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,EAEL9C,SAAS,KAAK,QAAQ,iBACrBrB,OAAA;QAAK8D,SAAS,EAAC,6DAA6D;QAAAD,QAAA,gBAC1E7D,OAAA;UAAK8D,SAAS,EAAC,+CAA+C;UAAAD,QAAA,eAC5D7D,OAAA;YAAK8D,SAAS,EAAC,KAAK;YAAAD,QAAA,gBAClB7D,OAAA;cAAI8D,SAAS,EAAC,mCAAmC;cAAAD,QAAA,EAAC;YAAc;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACrEnE,OAAA;cAAK8D,SAAS,EAAC,4CAA4C;cAAAD,QAAA,eACzD7D,OAAA;gBAAK8D,SAAS,EAAC,WAAW;gBAAAD,QAAA,EACvBlD,UAAU,CAACyD,GAAG,CAAEC,KAAK,iBACpBrE,OAAA;kBAEE8D,SAAS,EAAE,6DACT/C,aAAa,KAAKsD,KAAK,CAACtC,EAAE,GAAG,aAAa,GAAG,sBAAsB,EAClE;kBACHgC,OAAO,EAAEA,CAAA,KAAM/C,gBAAgB,CAACqD,KAAK,CAACtC,EAAE,CAAE;kBAAA8B,QAAA,gBAE1C7D,OAAA;oBAAK8D,SAAS,EAAC,0FAA0F;oBAAAD,QAAA,EACtGQ,KAAK,CAACzB,IAAI,CAAC0B,MAAM,CAAC,CAAC;kBAAC;oBAAAN,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAClB,CAAC,eACNnE,OAAA;oBAAA6D,QAAA,gBACE7D,OAAA;sBAAG8D,SAAS,EAAC,wBAAwB;sBAAAD,QAAA,EAAEQ,KAAK,CAACzB;oBAAI;sBAAAoB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC,eACtDnE,OAAA;sBAAG8D,SAAS,EAAC,uBAAuB;sBAAAD,QAAA,EAAC;oBAAa;sBAAAG,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAG,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACnD,CAAC;gBAAA,GAZDE,KAAK,CAACtC,EAAE;kBAAAiC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAaV,CACN;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENnE,OAAA;UAAK8D,SAAS,EAAC,6DAA6D;UAAAD,QAAA,eAC1E7D,OAAA;YAAK8D,SAAS,EAAC,yCAAyC;YAAAD,QAAA,EACrD9C,aAAa,gBACZf,OAAA,CAAAE,SAAA;cAAA2D,QAAA,gBACE7D,OAAA;gBAAK8D,SAAS,EAAC,oCAAoC;gBAAAD,QAAA,eACjD7D,OAAA;kBAAI8D,SAAS,EAAC,8BAA8B;kBAAAD,QAAA,GAAC,gBAC7B,EAACnB,WAAW,CAAC3B,aAAa,CAAC;gBAAA;kBAAAiD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvC;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACF,CAAC,eACNnE,OAAA;gBAAK8D,SAAS,EAAC,qCAAqC;gBAAAD,QAAA,eAClD7D,OAAA;kBAAK8D,SAAS,EAAC,WAAW;kBAAAD,QAAA,EACvBV,eAAe,CAACpC,aAAa,CAAC,CAACqD,GAAG,CAAEf,GAAG,iBACtCrD,OAAA;oBAEE8D,SAAS,EAAE,QAAQT,GAAG,CAACb,QAAQ,MAAKlC,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEyB,EAAE,IAAG,aAAa,GAAG,eAAe,EAAG;oBAAA8B,QAAA,eAExF7D,OAAA;sBACE8D,SAAS,EAAE,8BACTT,GAAG,CAACb,QAAQ,MAAKlC,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEyB,EAAE,IAC5B,wBAAwB,GACxB,wBAAwB,EAC3B;sBAAA8B,QAAA,gBAEH7D,OAAA;wBAAA6D,QAAA,EAAIR,GAAG,CAACZ;sBAAO;wBAAAuB,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAI,CAAC,eACpBnE,OAAA;wBAAG8D,SAAS,EAAC,yBAAyB;wBAAAD,QAAA,EAAEhB,UAAU,CAACQ,GAAG,CAACI,SAAS;sBAAC;wBAAAO,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAI,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACnE;kBAAC,GAZDd,GAAG,CAACtB,EAAE;oBAAAiC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAaR,CACN;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eACNnE,OAAA;gBAAK8D,SAAS,EAAC,gBAAgB;gBAAAD,QAAA,gBAC7B7D,OAAA;kBACEuE,IAAI,EAAC,MAAM;kBACXC,WAAW,EAAC,sBAAsB;kBAClCC,KAAK,EAAEtD,UAAW;kBAClBuD,QAAQ,EAAGC,CAAC,IAAKvD,aAAa,CAACuD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;kBAC/CX,SAAS,EAAC,kIAAkI;kBAC5Ie,SAAS,EAAGF,CAAC,IAAK;oBAChB,IAAIA,CAAC,CAACG,GAAG,KAAK,OAAO,IAAI,CAACH,CAAC,CAACI,QAAQ,EAAE;sBACpCJ,CAAC,CAACK,cAAc,CAAC,CAAC;sBAClB3C,iBAAiB,CAAC,CAAC;oBACrB;kBACF;gBAAE;kBAAA2B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eACFnE,OAAA;kBACE+D,OAAO,EAAE1B,iBAAkB;kBAC3ByB,SAAS,EAAC,qIAAqI;kBAAAD,QAAA,gBAE/I7D,OAAA,CAACL,aAAa;oBAACmE,SAAS,EAAC;kBAAc;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,QAE5C;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC;YAAA,eACN,CAAC,gBAEHnE,OAAA;cAAK8D,SAAS,EAAC,uDAAuD;cAAAD,QAAA,eACpE7D,OAAA;gBAAA6D,QAAA,EAAG;cAAuD;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3D;UACN;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,EAEA9C,SAAS,KAAK,UAAU,iBACvBrB,OAAA;QAAK8D,SAAS,EAAC,6DAA6D;QAAAD,QAAA,gBAC1E7D,OAAA;UAAK8D,SAAS,EAAC,+CAA+C;UAAAD,QAAA,eAC5D7D,OAAA;YAAK8D,SAAS,EAAC,KAAK;YAAAD,QAAA,gBAClB7D,OAAA;cAAI8D,SAAS,EAAC,mCAAmC;cAAAD,QAAA,EAAC;YAAQ;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC/DnE,OAAA;cAAK8D,SAAS,EAAC,4CAA4C;cAAAD,QAAA,eACzD7D,OAAA;gBAAK8D,SAAS,EAAC,WAAW;gBAAAD,QAAA,EACvBhD,YAAY,CAACY,MAAM,KAAK,CAAC,gBACxBzB,OAAA;kBAAG8D,SAAS,EAAC,+BAA+B;kBAAAD,QAAA,EAAC;gBAA2B;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC,GAE5EtD,YAAY,CAACuD,GAAG,CAAEa,OAAO,iBACvBjF,OAAA;kBAEE8D,SAAS,EAAE,6DACT7C,eAAe,KAAKgE,OAAO,CAAClD,EAAE,GAAG,aAAa,GAAG,sBAAsB,EACtE;kBACHgC,OAAO,EAAEA,CAAA,KAAM7C,kBAAkB,CAAC+D,OAAO,CAAClD,EAAE,CAAE;kBAAA8B,QAAA,gBAE9C7D,OAAA;oBAAK8D,SAAS,EAAC,0FAA0F;oBAAAD,QAAA,EACtGoB,OAAO,CAACrC,IAAI,CAAC0B,MAAM,CAAC,CAAC;kBAAC;oBAAAN,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACpB,CAAC,eACNnE,OAAA;oBAAA6D,QAAA,gBACE7D,OAAA;sBAAG8D,SAAS,EAAC,wBAAwB;sBAAAD,QAAA,EAAEoB,OAAO,CAACrC;oBAAI;sBAAAoB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC,EACvDc,OAAO,CAACC,SAAS,iBAChBlF,OAAA;sBAAG8D,SAAS,EAAC,uBAAuB;sBAAAD,QAAA,GAAC,MAAI,EAACoB,OAAO,CAACC,SAAS;oBAAA;sBAAAlB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAChE;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC;gBAAA,GAdDc,OAAO,CAAClD,EAAE;kBAAAiC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAeZ,CACN;cACF;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENnE,OAAA;UAAK8D,SAAS,EAAC,6DAA6D;UAAAD,QAAA,eAC1E7D,OAAA;YAAK8D,SAAS,EAAC,yCAAyC;YAAAD,QAAA,EACrD5C,eAAe,gBACdjB,OAAA,CAAAE,SAAA;cAAA2D,QAAA,gBACE7D,OAAA;gBAAK8D,SAAS,EAAC,oCAAoC;gBAAAD,QAAA,eACjD7D,OAAA;kBAAI8D,SAAS,EAAC,8BAA8B;kBAAAD,QAAA,GAAC,gBAC7B,EAACnB,WAAW,CAACzB,eAAe,CAAC;gBAAA;kBAAA+C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACzC;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACF,CAAC,eACNnE,OAAA;gBAAK8D,SAAS,EAAC,qCAAqC;gBAAAD,QAAA,eAClD7D,OAAA;kBAAK8D,SAAS,EAAC,WAAW;kBAAAD,QAAA,EACvBV,eAAe,CAAClC,eAAe,CAAC,CAACmD,GAAG,CAAEf,GAAG,iBACxCrD,OAAA;oBAEE8D,SAAS,EAAE,QAAQT,GAAG,CAACb,QAAQ,MAAKlC,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEyB,EAAE,IAAG,aAAa,GAAG,eAAe,EAAG;oBAAA8B,QAAA,eAExF7D,OAAA;sBACE8D,SAAS,EAAE,8BACTT,GAAG,CAACb,QAAQ,MAAKlC,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEyB,EAAE,IAC5B,wBAAwB,GACxB,wBAAwB,EAC3B;sBAAA8B,QAAA,gBAEH7D,OAAA;wBAAA6D,QAAA,EAAIR,GAAG,CAACZ;sBAAO;wBAAAuB,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAI,CAAC,eACpBnE,OAAA;wBAAG8D,SAAS,EAAC,yBAAyB;wBAAAD,QAAA,EAAEhB,UAAU,CAACQ,GAAG,CAACI,SAAS;sBAAC;wBAAAO,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAI,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACnE;kBAAC,GAZDd,GAAG,CAACtB,EAAE;oBAAAiC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAaR,CACN;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eACNnE,OAAA;gBAAK8D,SAAS,EAAC,gBAAgB;gBAAAD,QAAA,gBAC7B7D,OAAA;kBACEuE,IAAI,EAAC,MAAM;kBACXC,WAAW,EAAC,sBAAsB;kBAClCC,KAAK,EAAEtD,UAAW;kBAClBuD,QAAQ,EAAGC,CAAC,IAAKvD,aAAa,CAACuD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;kBAC/CX,SAAS,EAAC,kIAAkI;kBAC5Ie,SAAS,EAAGF,CAAC,IAAK;oBAChB,IAAIA,CAAC,CAACG,GAAG,KAAK,OAAO,IAAI,CAACH,CAAC,CAACI,QAAQ,EAAE;sBACpCJ,CAAC,CAACK,cAAc,CAAC,CAAC;sBAClB3C,iBAAiB,CAAC,CAAC;oBACrB;kBACF;gBAAE;kBAAA2B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eACFnE,OAAA;kBACE+D,OAAO,EAAE1B,iBAAkB;kBAC3ByB,SAAS,EAAC,qIAAqI;kBAAAD,QAAA,gBAE/I7D,OAAA,CAACL,aAAa;oBAACmE,SAAS,EAAC;kBAAc;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,QAE5C;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC;YAAA,eACN,CAAC,gBAEHnE,OAAA;cAAK8D,SAAS,EAAC,uDAAuD;cAAAD,QAAA,eACpE7D,OAAA;gBAAA6D,QAAA,EACGhD,YAAY,CAACY,MAAM,KAAK,CAAC,GACtB,0CAA0C,GAC1C;cAAkD;gBAAAuC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrD;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD;UACN;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAEtB,CAAC;AAAC/D,EAAA,CA9TID,IAAI;EAAA,QACsBV,OAAO;AAAA;AAAA0F,EAAA,GADjChF,IAAI;AAgUV,eAAeA,IAAI;AAAC,IAAAgF,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}