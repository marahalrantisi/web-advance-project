{"ast":null,"code":"import React from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';// مكون مسار محمي\n// يتحقق من حالة المصادقة ويعيد توجيه المستخدم إذا لم يكن مصادقاً\nimport{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,role=null}=_ref;const{user,loading}=useAuth();const navigate=useNavigate();// إذا كان التحميل جارياً، اعرض شاشة التحميل\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"})});}// إذا لم يكن المستخدم مصادقاً، أعد توجيهه إلى صفحة تسجيل الدخول\nif(!user){navigate('/signin',{replace:true});return null;}// إذا كان هناك دور محدد وكان دور المستخدم لا يطابقه، أعد توجيهه إلى الصفحة المناسبة\nif(role&&user.role!==role){if(user.role==='admin'){navigate('/dashboard',{replace:true});}else if(user.role==='student'){navigate('/student-dashboard',{replace:true});}else{navigate('/dashboard',{replace:true});}return null;}// إذا كان المستخدم مصادقاً ودوره مناسب، اعرض المحتوى\nreturn children;};export default ProtectedRoute;","map":{"version":3,"names":["React","useNavigate","useAuth","jsx","_jsx","ProtectedRoute","_ref","children","role","user","loading","navigate","className","replace"],"sources":["D:/react-node-project-final/react-node-project/client/src/components/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\n\n// مكون مسار محمي\n// يتحقق من حالة المصادقة ويعيد توجيه المستخدم إذا لم يكن مصادقاً\nconst ProtectedRoute = ({ children, role = null }) => {\n  const { user, loading } = useAuth();\n  const navigate = useNavigate();\n\n  // إذا كان التحميل جارياً، اعرض شاشة التحميل\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  // إذا لم يكن المستخدم مصادقاً، أعد توجيهه إلى صفحة تسجيل الدخول\n  if (!user) {\n    navigate('/signin', { replace: true });\n    return null;\n  }\n\n  // إذا كان هناك دور محدد وكان دور المستخدم لا يطابقه، أعد توجيهه إلى الصفحة المناسبة\n  if (role && user.role !== role) {\n    if (user.role === 'admin') {\n      navigate('/dashboard', { replace: true });\n    } else if (user.role === 'student') {\n      navigate('/student-dashboard', { replace: true });\n    } else {\n      navigate('/dashboard', { replace: true });\n    }\n    return null;\n  }\n\n  // إذا كان المستخدم مصادقاً ودوره مناسب، اعرض المحتوى\n  return children;\n};\n\nexport default ProtectedRoute;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,OAAO,KAAQ,wBAAwB,CAEhD;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBACA,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAA+B,IAA9B,CAAEC,QAAQ,CAAEC,IAAI,CAAG,IAAK,CAAC,CAAAF,IAAA,CAC/C,KAAM,CAAEG,IAAI,CAAEC,OAAQ,CAAC,CAAGR,OAAO,CAAC,CAAC,CACnC,KAAM,CAAAS,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9B;AACA,GAAIS,OAAO,CAAE,CACX,mBACEN,IAAA,QAAKQ,SAAS,CAAC,+CAA+C,CAAAL,QAAA,cAC5DH,IAAA,QAAKQ,SAAS,CAAC,2EAA2E,CAAM,CAAC,CAC9F,CAAC,CAEV,CAEA;AACA,GAAI,CAACH,IAAI,CAAE,CACTE,QAAQ,CAAC,SAAS,CAAE,CAAEE,OAAO,CAAE,IAAK,CAAC,CAAC,CACtC,MAAO,KAAI,CACb,CAEA;AACA,GAAIL,IAAI,EAAIC,IAAI,CAACD,IAAI,GAAKA,IAAI,CAAE,CAC9B,GAAIC,IAAI,CAACD,IAAI,GAAK,OAAO,CAAE,CACzBG,QAAQ,CAAC,YAAY,CAAE,CAAEE,OAAO,CAAE,IAAK,CAAC,CAAC,CAC3C,CAAC,IAAM,IAAIJ,IAAI,CAACD,IAAI,GAAK,SAAS,CAAE,CAClCG,QAAQ,CAAC,oBAAoB,CAAE,CAAEE,OAAO,CAAE,IAAK,CAAC,CAAC,CACnD,CAAC,IAAM,CACLF,QAAQ,CAAC,YAAY,CAAE,CAAEE,OAAO,CAAE,IAAK,CAAC,CAAC,CAC3C,CACA,MAAO,KAAI,CACb,CAEA;AACA,MAAO,CAAAN,QAAQ,CACjB,CAAC,CAED,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}