{"ast":null,"code":"var _jsxFileName = \"D:\\\\react-node-project-final\\\\react-node-project\\\\client\\\\src\\\\pages\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport DashboardLayout from '../components/dashboard-layout';\nimport { MessageSquare, Users, UserCog } from 'lucide-react';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Chat = () => {\n  _s();\n  const {\n    user: currentUser\n  } = useAuth();\n  const [users, setUsers] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [adminUsers, setAdminUsers] = useState([]);\n  const [studentUsers, setStudentUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [newMessage, setNewMessage] = useState('');\n  const [activeTab, setActiveTab] = useState('admins');\n  useEffect(() => {\n    fetchUsers();\n    fetchMessages();\n  }, []);\n  useEffect(() => {\n    if (users.length > 0) {\n      // Filter admin users\n      const admins = users.filter(u => u.role === 'admin');\n      setAdminUsers(admins);\n\n      // Filter student users (excluding current user)\n      const students = users.filter(u => u.role === 'student' && u.id !== (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id));\n      setStudentUsers(students);\n\n      // Set first admin as selected by default if available\n      if (admins.length > 0 && !selectedUser) {\n        setSelectedUser(admins[0].id);\n      }\n\n      // Set first student as selected by default if available\n      if (students.length > 0 && !selectedUser) {\n        setSelectedUser(students[0].id);\n      }\n    }\n  }, [users, currentUser]);\n  useEffect(() => {\n    if (selectedUser) {\n      fetchMessages(selectedUser.id);\n    }\n  }, [selectedUser, fetchMessages]);\n  const fetchUsers = async () => {\n    try {\n      const response = await api.get('/users');\n      setUsers(response.data);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n    }\n  };\n  const fetchMessages = async () => {\n    try {\n      const response = await api.get('/messages');\n      setMessages(response.data);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n  const handleSendMessage = async () => {\n    if (!newMessage || !currentUser) return;\n    const receiverId = activeTab === 'admins' ? selectedUser : selectedUser;\n    if (!receiverId) return;\n    try {\n      const response = await api.post('/messages', {\n        senderId: currentUser.id,\n        receiverId,\n        content: newMessage\n      });\n      setMessages([...messages, response.data]);\n      setNewMessage('');\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n  const getUserName = id => {\n    const user = users.find(user => user.id === id);\n    return user ? user.name : 'Unknown User';\n  };\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();\n  };\n  const getConversation = userId => {\n    if (!currentUser) return [];\n    return messages.filter(msg => msg.senderId === currentUser.id && msg.receiverId === userId || msg.senderId === userId && msg.receiverId === currentUser.id).sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());\n  };\n  return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n    title: \"Chat\",\n    userRole: currentUser === null || currentUser === void 0 ? void 0 : currentUser.role,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `flex items-center justify-center gap-2 p-4 rounded-t-lg ${activeTab === 'admins' ? 'bg-gray-800 text-white' : 'bg-gray-700 text-gray-300'}`,\n          onClick: () => setActiveTab('admins'),\n          children: [/*#__PURE__*/_jsxDEV(UserCog, {\n            className: \"h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Chat with Administrators\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `flex items-center justify-center gap-2 p-4 rounded-t-lg ${activeTab === 'students' ? 'bg-gray-800 text-white' : 'bg-gray-700 text-gray-300'}`,\n          onClick: () => setActiveTab('students'),\n          children: [/*#__PURE__*/_jsxDEV(Users, {\n            className: \"h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Chat with Students\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), activeTab === 'admins' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-6 h-[calc(100vh-280px)]\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-800 border border-gray-700 rounded-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-bold mb-4 text-white\",\n              children: \"Administrators\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-[calc(100vh-360px)] overflow-y-auto pr-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: adminUsers.map(admin => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `p-3 rounded-md cursor-pointer flex items-center space-x-3 ${selectedUser === admin.id ? 'bg-gray-700' : 'hover:bg-gray-700/50'}`,\n                  onClick: () => setSelectedUser(admin.id),\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold\",\n                    children: admin.name.charAt(0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-medium text-white\",\n                      children: admin.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 153,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-400\",\n                      children: \"Administrator\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 154,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 25\n                  }, this)]\n                }, admin.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-800 border border-gray-700 rounded-lg md:col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 flex flex-col h-[calc(100vh-320px)]\",\n            children: selectedUser ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-b border-gray-700 pb-4 mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-xl font-bold text-white\",\n                  children: [\"Chatting with \", getUserName(selectedUser)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-grow overflow-y-auto mb-4 pr-4\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-4\",\n                  children: getConversation(selectedUser).map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `flex ${msg.senderId === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) ? 'justify-end' : 'justify-start'}`,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: `max-w-[70%] p-3 rounded-lg ${msg.senderId === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) ? 'bg-blue-600 text-white' : 'bg-gray-700 text-white'}`,\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        children: msg.content\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 186,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-xs opacity-70 mt-1\",\n                        children: formatDate(msg.timestamp)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 187,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 179,\n                      columnNumber: 29\n                    }, this)\n                  }, msg.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Type your message...\",\n                  value: newMessage,\n                  onChange: e => setNewMessage(e.target.value),\n                  className: \"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                  onKeyDown: e => {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                      e.preventDefault();\n                      handleSendMessage();\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleSendMessage,\n                  className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n                    className: \"h-4 w-4 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 25\n                  }, this), \"Send\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center h-full text-gray-400\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Select an administrator from the list to start chatting\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this), activeTab === 'students' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-6 h-[calc(100vh-280px)]\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-800 border border-gray-700 rounded-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-bold mb-4 text-white\",\n              children: \"Students\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-[calc(100vh-360px)] overflow-y-auto pr-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: studentUsers.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-400 text-center p-4\",\n                  children: \"No other students available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 23\n                }, this) : studentUsers.map(student => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `p-3 rounded-md cursor-pointer flex items-center space-x-3 ${selectedUser === student.id ? 'bg-gray-700' : 'hover:bg-gray-700/50'}`,\n                  onClick: () => setSelectedUser(student.id),\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold\",\n                    children: student.name.charAt(0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-medium text-white\",\n                      children: student.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 248,\n                      columnNumber: 29\n                    }, this), student.studentId && /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-400\",\n                      children: [\"ID: \", student.studentId]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 250,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 27\n                  }, this)]\n                }, student.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-800 border border-gray-700 rounded-lg md:col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 flex flex-col h-[calc(100vh-320px)]\",\n            children: selectedUser ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-b border-gray-700 pb-4 mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-xl font-bold text-white\",\n                  children: [\"Chatting with \", getUserName(selectedUser)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-grow overflow-y-auto mb-4 pr-4\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-4\",\n                  children: getConversation(selectedUser).map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `flex ${msg.senderId === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) ? 'justify-end' : 'justify-start'}`,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: `max-w-[70%] p-3 rounded-lg ${msg.senderId === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id) ? 'bg-blue-600 text-white' : 'bg-gray-700 text-white'}`,\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        children: msg.content\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 284,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-xs opacity-70 mt-1\",\n                        children: formatDate(msg.timestamp)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 285,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 277,\n                      columnNumber: 29\n                    }, this)\n                  }, msg.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Type your message...\",\n                  value: newMessage,\n                  onChange: e => setNewMessage(e.target.value),\n                  className: \"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                  onKeyDown: e => {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                      e.preventDefault();\n                      handleSendMessage();\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleSendMessage,\n                  className: \"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n                    className: \"h-4 w-4 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 25\n                  }, this), \"Send\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center h-full text-gray-400\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: studentUsers.length === 0 ? 'No other students available to chat with' : 'Select a student from the list to start chatting'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n_s(Chat, \"MkgswSP77Xtq2TW88rasQHE6w0k=\", false, function () {\n  return [useAuth];\n});\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","DashboardLayout","MessageSquare","Users","UserCog","api","jsxDEV","_jsxDEV","Fragment","_Fragment","Chat","_s","user","currentUser","users","setUsers","messages","setMessages","adminUsers","setAdminUsers","studentUsers","setStudentUsers","selectedUser","setSelectedUser","newMessage","setNewMessage","activeTab","setActiveTab","fetchUsers","fetchMessages","length","admins","filter","u","role","students","id","response","get","data","error","console","handleSendMessage","receiverId","post","senderId","content","getUserName","find","name","formatDate","dateString","date","Date","toLocaleDateString","toLocaleTimeString","getConversation","userId","msg","sort","a","b","timestamp","getTime","title","userRole","children","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","map","admin","charAt","type","placeholder","value","onChange","e","target","onKeyDown","key","shiftKey","preventDefault","student","studentId","_c","$RefreshReg$"],"sources":["D:/react-node-project-final/react-node-project/client/src/pages/Chat.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport DashboardLayout from '../components/dashboard-layout';\nimport { MessageSquare, Users, UserCog } from 'lucide-react';\nimport api from '../services/api';\n\nconst Chat = () => {\n  const { user: currentUser } = useAuth();\n  const [users, setUsers] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [adminUsers, setAdminUsers] = useState([]);\n  const [studentUsers, setStudentUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [newMessage, setNewMessage] = useState('');\n  const [activeTab, setActiveTab] = useState('admins');\n\n  useEffect(() => {\n    fetchUsers();\n    fetchMessages();\n  }, []);\n\n  useEffect(() => {\n    if (users.length > 0) {\n      // Filter admin users\n      const admins = users.filter(u => u.role === 'admin');\n      setAdminUsers(admins);\n\n      // Filter student users (excluding current user)\n      const students = users.filter(u => u.role === 'student' && u.id !== currentUser?.id);\n      setStudentUsers(students);\n\n      // Set first admin as selected by default if available\n      if (admins.length > 0 && !selectedUser) {\n        setSelectedUser(admins[0].id);\n      }\n\n      // Set first student as selected by default if available\n      if (students.length > 0 && !selectedUser) {\n        setSelectedUser(students[0].id);\n      }\n    }\n  }, [users, currentUser]);\n\n  useEffect(() => {\n    if (selectedUser) {\n      fetchMessages(selectedUser.id);\n    }\n  }, [selectedUser, fetchMessages]);\n\n  const fetchUsers = async () => {\n    try {\n      const response = await api.get('/users');\n      setUsers(response.data);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n    }\n  };\n\n  const fetchMessages = async () => {\n    try {\n      const response = await api.get('/messages');\n      setMessages(response.data);\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n\n  const handleSendMessage = async () => {\n    if (!newMessage || !currentUser) return;\n\n    const receiverId = activeTab === 'admins' ? selectedUser : selectedUser;\n    if (!receiverId) return;\n\n    try {\n      const response = await api.post('/messages', {\n        senderId: currentUser.id,\n        receiverId,\n        content: newMessage,\n      });\n\n      setMessages([...messages, response.data]);\n      setNewMessage('');\n    } catch (error) {\n      console.error('Error sending message:', error);\n    }\n  };\n\n  const getUserName = (id) => {\n    const user = users.find(user => user.id === id);\n    return user ? user.name : 'Unknown User';\n  };\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();\n  };\n\n  const getConversation = (userId) => {\n    if (!currentUser) return [];\n\n    return messages\n      .filter(\n        msg =>\n          (msg.senderId === currentUser.id && msg.receiverId === userId) ||\n          (msg.senderId === userId && msg.receiverId === currentUser.id),\n      )\n      .sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());\n  };\n\n  return (\n    <DashboardLayout title=\"Chat\" userRole={currentUser?.role}>\n      <div className=\"w-full\">\n        <div className=\"grid grid-cols-2 mb-6\">\n          <button\n            className={`flex items-center justify-center gap-2 p-4 rounded-t-lg ${\n              activeTab === 'admins' ? 'bg-gray-800 text-white' : 'bg-gray-700 text-gray-300'\n            }`}\n            onClick={() => setActiveTab('admins')}\n          >\n            <UserCog className=\"h-4 w-4\" />\n            <span>Chat with Administrators</span>\n          </button>\n          <button\n            className={`flex items-center justify-center gap-2 p-4 rounded-t-lg ${\n              activeTab === 'students' ? 'bg-gray-800 text-white' : 'bg-gray-700 text-gray-300'\n            }`}\n            onClick={() => setActiveTab('students')}\n          >\n            <Users className=\"h-4 w-4\" />\n            <span>Chat with Students</span>\n          </button>\n        </div>\n\n        {activeTab === 'admins' && (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 h-[calc(100vh-280px)]\">\n            <div className=\"bg-gray-800 border border-gray-700 rounded-lg\">\n              <div className=\"p-4\">\n                <h2 className=\"text-xl font-bold mb-4 text-white\">Administrators</h2>\n                <div className=\"h-[calc(100vh-360px)] overflow-y-auto pr-4\">\n                  <div className=\"space-y-2\">\n                    {adminUsers.map((admin) => (\n                      <div\n                        key={admin.id}\n                        className={`p-3 rounded-md cursor-pointer flex items-center space-x-3 ${\n                          selectedUser === admin.id ? 'bg-gray-700' : 'hover:bg-gray-700/50'\n                        }`}\n                        onClick={() => setSelectedUser(admin.id)}\n                      >\n                        <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold\">\n                          {admin.name.charAt(0)}\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-white\">{admin.name}</p>\n                          <p className=\"text-sm text-gray-400\">Administrator</p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gray-800 border border-gray-700 rounded-lg md:col-span-2\">\n              <div className=\"p-4 flex flex-col h-[calc(100vh-320px)]\">\n                {selectedUser ? (\n                  <>\n                    <div className=\"border-b border-gray-700 pb-4 mb-4\">\n                      <h2 className=\"text-xl font-bold text-white\">\n                        Chatting with {getUserName(selectedUser)}\n                      </h2>\n                    </div>\n                    <div className=\"flex-grow overflow-y-auto mb-4 pr-4\">\n                      <div className=\"space-y-4\">\n                        {getConversation(selectedUser).map((msg) => (\n                          <div\n                            key={msg.id}\n                            className={`flex ${msg.senderId === currentUser?.id ? 'justify-end' : 'justify-start'}`}\n                          >\n                            <div\n                              className={`max-w-[70%] p-3 rounded-lg ${\n                                msg.senderId === currentUser?.id\n                                  ? 'bg-blue-600 text-white'\n                                  : 'bg-gray-700 text-white'\n                              }`}\n                            >\n                              <p>{msg.content}</p>\n                              <p className=\"text-xs opacity-70 mt-1\">{formatDate(msg.timestamp)}</p>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      <input\n                        type=\"text\"\n                        placeholder=\"Type your message...\"\n                        value={newMessage}\n                        onChange={(e) => setNewMessage(e.target.value)}\n                        className=\"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        onKeyDown={(e) => {\n                          if (e.key === 'Enter' && !e.shiftKey) {\n                            e.preventDefault();\n                            handleSendMessage();\n                          }\n                        }}\n                      />\n                      <button\n                        onClick={handleSendMessage}\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center\"\n                      >\n                        <MessageSquare className=\"h-4 w-4 mr-2\" />\n                        Send\n                      </button>\n                    </div>\n                  </>\n                ) : (\n                  <div className=\"flex items-center justify-center h-full text-gray-400\">\n                    <p>Select an administrator from the list to start chatting</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'students' && (\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 h-[calc(100vh-280px)]\">\n            <div className=\"bg-gray-800 border border-gray-700 rounded-lg\">\n              <div className=\"p-4\">\n                <h2 className=\"text-xl font-bold mb-4 text-white\">Students</h2>\n                <div className=\"h-[calc(100vh-360px)] overflow-y-auto pr-4\">\n                  <div className=\"space-y-2\">\n                    {studentUsers.length === 0 ? (\n                      <p className=\"text-gray-400 text-center p-4\">No other students available</p>\n                    ) : (\n                      studentUsers.map((student) => (\n                        <div\n                          key={student.id}\n                          className={`p-3 rounded-md cursor-pointer flex items-center space-x-3 ${\n                            selectedUser === student.id ? 'bg-gray-700' : 'hover:bg-gray-700/50'\n                          }`}\n                          onClick={() => setSelectedUser(student.id)}\n                        >\n                          <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold\">\n                            {student.name.charAt(0)}\n                          </div>\n                          <div>\n                            <p className=\"font-medium text-white\">{student.name}</p>\n                            {student.studentId && (\n                              <p className=\"text-sm text-gray-400\">ID: {student.studentId}</p>\n                            )}\n                          </div>\n                        </div>\n                      ))\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gray-800 border border-gray-700 rounded-lg md:col-span-2\">\n              <div className=\"p-4 flex flex-col h-[calc(100vh-320px)]\">\n                {selectedUser ? (\n                  <>\n                    <div className=\"border-b border-gray-700 pb-4 mb-4\">\n                      <h2 className=\"text-xl font-bold text-white\">\n                        Chatting with {getUserName(selectedUser)}\n                      </h2>\n                    </div>\n                    <div className=\"flex-grow overflow-y-auto mb-4 pr-4\">\n                      <div className=\"space-y-4\">\n                        {getConversation(selectedUser).map((msg) => (\n                          <div\n                            key={msg.id}\n                            className={`flex ${msg.senderId === currentUser?.id ? 'justify-end' : 'justify-start'}`}\n                          >\n                            <div\n                              className={`max-w-[70%] p-3 rounded-lg ${\n                                msg.senderId === currentUser?.id\n                                  ? 'bg-blue-600 text-white'\n                                  : 'bg-gray-700 text-white'\n                              }`}\n                            >\n                              <p>{msg.content}</p>\n                              <p className=\"text-xs opacity-70 mt-1\">{formatDate(msg.timestamp)}</p>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      <input\n                        type=\"text\"\n                        placeholder=\"Type your message...\"\n                        value={newMessage}\n                        onChange={(e) => setNewMessage(e.target.value)}\n                        className=\"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        onKeyDown={(e) => {\n                          if (e.key === 'Enter' && !e.shiftKey) {\n                            e.preventDefault();\n                            handleSendMessage();\n                          }\n                        }}\n                      />\n                      <button\n                        onClick={handleSendMessage}\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center\"\n                      >\n                        <MessageSquare className=\"h-4 w-4 mr-2\" />\n                        Send\n                      </button>\n                    </div>\n                  </>\n                ) : (\n                  <div className=\"flex items-center justify-center h-full text-gray-400\">\n                    <p>\n                      {studentUsers.length === 0\n                        ? 'No other students available to chat with'\n                        : 'Select a student from the list to start chatting'}\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  );\n};\n\nexport default Chat;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}