{"ast":null,"code":"var _jsxFileName = \"D:\\\\react-node-project-final\\\\react-node-project\\\\client\\\\src\\\\pages\\\\StudentNotifications.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/sidebar';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StudentNotifications = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [notifications, setNotifications] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchNotifications = async () => {\n      try {\n        // Get all notifications and filter for the current user\n        const response = await api.get('/notifications');\n        const userNotifications = response.data.filter(notification => notification.userId === (user === null || user === void 0 ? void 0 : user.id));\n        setNotifications(userNotifications);\n        setLoading(false);\n      } catch (error) {\n        console.error('خطأ في جلب الإشعارات:', error);\n        setNotifications([]);\n        setLoading(false);\n      }\n    };\n    if (user) {\n      fetchNotifications();\n    }\n  }, [user]);\n\n  // تنسيق التاريخ\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('ar-SA', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // تحديد حالة الإشعار كمقروء\n  const markAsRead = async notificationId => {\n    try {\n      await api.patch(`/notifications/${notificationId}/read`);\n\n      // تحديث حالة الإشعار محلياً\n      setNotifications(prevNotifications => prevNotifications.map(notification => notification.id === notificationId ? {\n        ...notification,\n        read: true\n      } : notification));\n    } catch (error) {\n      console.error('خطأ في تحديث حالة الإشعار:', error);\n    }\n  };\n\n  // حذف إشعار\n  const deleteNotification = async notificationId => {\n    try {\n      await api.delete(`/notifications/${notificationId}`);\n\n      // حذف الإشعار محلياً\n      setNotifications(prevNotifications => prevNotifications.filter(notification => notification.id !== notificationId));\n    } catch (error) {\n      console.error('خطأ في حذف الإشعار:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-screen bg-gray-100\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 p-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-4xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-gray-900 mb-6\",\n          children: \"\\u0627\\u0644\\u0625\\u0634\\u0639\\u0627\\u0631\\u0627\\u062A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center items-center h-64\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this) : notifications.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-12\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0625\\u0634\\u0639\\u0627\\u0631\\u0627\\u062A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: notifications.map(notification => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `bg-white rounded-lg shadow p-4 ${!notification.read ? 'border-r-4 border-blue-500' : ''}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-start\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-semibold text-gray-900\",\n                  children: notification.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-600 mt-1\",\n                  children: notification.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-500\",\n                children: formatDate(notification.createdAt)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 19\n            }, this)\n          }, notification.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentNotifications, \"KwbttxYnRFIddpGY4b6g5RMJU9Q=\", false, function () {\n  return [useAuth];\n});\n_c = StudentNotifications;\nexport default StudentNotifications;\nvar _c;\n$RefreshReg$(_c, \"StudentNotifications\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","Sidebar","api","jsxDEV","_jsxDEV","StudentNotifications","_s","user","notifications","setNotifications","loading","setLoading","fetchNotifications","response","get","userNotifications","data","filter","notification","userId","id","error","console","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute","markAsRead","notificationId","patch","prevNotifications","map","read","deleteNotification","delete","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","title","message","createdAt","_c","$RefreshReg$"],"sources":["D:/react-node-project-final/react-node-project/client/src/pages/StudentNotifications.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Sidebar from '../components/sidebar';\nimport api from '../services/api';\n\nconst StudentNotifications = () => {\n  const { user } = useAuth();\n  const [notifications, setNotifications] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchNotifications = async () => {\n      try {\n        // Get all notifications and filter for the current user\n        const response = await api.get('/notifications');\n        const userNotifications = response.data.filter(\n          notification => notification.userId === user?.id\n        );\n        setNotifications(userNotifications);\n        setLoading(false);\n      } catch (error) {\n        console.error('خطأ في جلب الإشعارات:', error);\n        setNotifications([]);\n        setLoading(false);\n      }\n    };\n\n    if (user) {\n      fetchNotifications();\n    }\n  }, [user]);\n\n  // تنسيق التاريخ\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('ar-SA', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // تحديد حالة الإشعار كمقروء\n  const markAsRead = async (notificationId) => {\n    try {\n      await api.patch(`/notifications/${notificationId}/read`);\n      \n      // تحديث حالة الإشعار محلياً\n      setNotifications(prevNotifications => \n        prevNotifications.map(notification => \n          notification.id === notificationId ? { ...notification, read: true } : notification\n        )\n      );\n    } catch (error) {\n      console.error('خطأ في تحديث حالة الإشعار:', error);\n    }\n  };\n\n  // حذف إشعار\n  const deleteNotification = async (notificationId) => {\n    try {\n      await api.delete(`/notifications/${notificationId}`);\n      \n      // حذف الإشعار محلياً\n      setNotifications(prevNotifications => \n        prevNotifications.filter(notification => notification.id !== notificationId)\n      );\n    } catch (error) {\n      console.error('خطأ في حذف الإشعار:', error);\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-100\">\n      {/* الشريط الجانبي */}\n      <Sidebar />\n      \n      {/* المحتوى الرئيسي */}\n      <div className=\"flex-1 p-8\">\n        <div className=\"max-w-4xl mx-auto\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">الإشعارات</h1>\n          \n          {loading ? (\n            <div className=\"flex justify-center items-center h-64\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n            </div>\n          ) : notifications.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <p className=\"text-gray-500\">لا توجد إشعارات</p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {notifications.map((notification) => (\n                <div\n                  key={notification.id}\n                  className={`bg-white rounded-lg shadow p-4 ${\n                    !notification.read ? 'border-r-4 border-blue-500' : ''\n                  }`}\n                >\n                  <div className=\"flex justify-between items-start\">\n                    <div>\n                      <h3 className=\"font-semibold text-gray-900\">{notification.title}</h3>\n                      <p className=\"text-gray-600 mt-1\">{notification.message}</p>\n                    </div>\n                    <span className=\"text-sm text-gray-500\">\n                      {formatDate(notification.createdAt)}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default StudentNotifications;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}